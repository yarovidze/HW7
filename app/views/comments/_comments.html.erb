<% @post.comments.each do |comment| %>
  <div>
    <div class="comment-wrap">
      <% unpublished_comment = comment.status == "unpublished" %>
      <% if unpublished_comment %>
        <div class="comment-status"><%= comment.status %></div>
      <% end %>
      <%= image_tag comment.author.avatar.variant(resize_to_limit: [50, 50]) if comment.author.avatar.present? %>
      <strong><%= comment.author.display_author %>:</strong>
      <%if comment.edited_at? %><p class="comment-edit">Comment edited</p><%end%>
      <div><%= comment.body %></div>
      <div class="comment-add"> added <%= distance_of_time_in_words(comment.updated_at, Time.now) %> ago</div>
    </div>
    <% if comment.author == current_author %>
      <div class="text-right mb-3">
        <% if unpublished_comment %>
          <%= link_to 'Publish comment', post_comment_path(@post, comment, comment: {status: :published}),
                      method: :patch,
                      class: "btn btn-success" %>
        <% end %>
        <%= link_to 'Edit', edit_post_comment_path(comment.post, comment),
                    class: "btn btn-info" %>
        <%= link_to 'Delete', post_comment_path(@post, comment),
                    method: :delete,
                    data: {confirm: 'Are you sure you want to delete the comment?'},
                    class: "btn btn-danger" %>
      </div>
    <% end %>
  </div>
<% end %>